{"ast":null,"code":"import axios from 'axios';\n// API Configuration\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\nclass ApiService {\n  constructor() {\n    this.api = void 0;\n    this.api = axios.create({\n      baseURL: API_BASE_URL,\n      timeout: 30000,\n      // 30 seconds\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n\n    // Request interceptor to add auth token\n    this.api.interceptors.request.use(config => {\n      const token = localStorage.getItem('authToken');\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n      return config;\n    }, error => {\n      return Promise.reject(error);\n    });\n\n    // Response interceptor for error handling\n    this.api.interceptors.response.use(response => response, error => {\n      var _error$response;\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n        // Clear token but do not force redirect to avoid loops; let UI handle\n        localStorage.removeItem('authToken');\n      }\n      return Promise.reject(error);\n    });\n  }\n\n  // File Upload\n  async uploadFiles(files) {\n    const formData = new FormData();\n    files.forEach(file => {\n      formData.append('files', file);\n    });\n    const response = await this.api.post('/api/upload', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return response.data;\n  }\n\n  // Question Generation\n  async generateQuestions(request) {\n    const response = await this.api.post('/api/generate', request);\n    return response.data;\n  }\n\n  // Question Bank Management\n  async getQuestionBanks() {\n    const response = await this.api.get('/api/questions');\n    return response.data;\n  }\n  async getQuestionBank(bankId) {\n    const response = await this.api.get(`/api/questions/${bankId}`);\n    return response.data;\n  }\n  async createQuestionBank(bank) {\n    const response = await this.api.post('/api/questions', bank);\n    return response.data;\n  }\n  async updateQuestionBank(bankId, bank) {\n    const response = await this.api.put(`/api/questions/${bankId}`, bank);\n    return response.data;\n  }\n  async deleteQuestionBank(bankId) {\n    await this.api.delete(`/api/questions/${bankId}`);\n  }\n\n  // Export Functionality\n  async exportPaper(paper, format, includeAnswerKey = false) {\n    const response = await this.api.post('/api/export', {\n      questions: paper.questions,\n      format,\n      include_answer_key: includeAnswerKey,\n      paper_title: paper.title,\n      instructions: paper.instructions\n    }, {\n      responseType: 'blob'\n    });\n    return response.data;\n  }\n\n  // Health Check\n  async healthCheck() {\n    const response = await this.api.get('/health');\n    return response.data;\n  }\n\n  // Utility methods\n  getApiUrl() {\n    return API_BASE_URL;\n  }\n  setAuthToken(token) {\n    localStorage.setItem('authToken', token);\n  }\n  removeAuthToken() {\n    localStorage.removeItem('authToken');\n  }\n  isAuthenticated() {\n    return !!localStorage.getItem('authToken');\n  }\n}\n\n// Create and export a singleton instance\nexport const apiService = new ApiService();\n\n// Export the class for testing purposes\nexport default ApiService;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","ApiService","constructor","api","create","baseURL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","status","removeItem","uploadFiles","files","formData","FormData","forEach","file","append","post","data","generateQuestions","getQuestionBanks","get","getQuestionBank","bankId","createQuestionBank","bank","updateQuestionBank","put","deleteQuestionBank","delete","exportPaper","paper","format","includeAnswerKey","questions","include_answer_key","paper_title","title","instructions","responseType","healthCheck","getApiUrl","setAuthToken","setItem","removeAuthToken","isAuthenticated","apiService"],"sources":["C:/Users/DELL/Desktop/Questgen/frontend/src/services/api.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosResponse } from 'axios';\r\nimport { \r\n  FileUploadResponse, \r\n  QuestionGenerationRequest, \r\n  QuestionGenerationResponse,\r\n  QuestionBank,\r\n  QuestionPaper,\r\n  ApiResponse\r\n} from '../types';\r\n\r\n// API Configuration\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\nclass ApiService {\r\n  private api: AxiosInstance;\r\n\r\n  constructor() {\r\n    this.api = axios.create({\r\n      baseURL: API_BASE_URL,\r\n      timeout: 30000, // 30 seconds\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    // Request interceptor to add auth token\r\n    this.api.interceptors.request.use(\r\n      (config) => {\r\n        const token = localStorage.getItem('authToken');\r\n        if (token) {\r\n          config.headers.Authorization = `Bearer ${token}`;\r\n        }\r\n        return config;\r\n      },\r\n      (error) => {\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n\r\n    // Response interceptor for error handling\r\n    this.api.interceptors.response.use(\r\n      (response: AxiosResponse) => response,\r\n      (error) => {\r\n        if (error.response?.status === 401) {\r\n          // Clear token but do not force redirect to avoid loops; let UI handle\r\n          localStorage.removeItem('authToken');\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  // File Upload\r\n  async uploadFiles(files: File[]): Promise<FileUploadResponse> {\r\n    const formData = new FormData();\r\n    files.forEach((file) => {\r\n      formData.append('files', file);\r\n    });\r\n\r\n    const response = await this.api.post<FileUploadResponse>('/api/upload', formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n    });\r\n\r\n    return response.data;\r\n  }\r\n\r\n  // Question Generation\r\n  async generateQuestions(request: QuestionGenerationRequest): Promise<QuestionGenerationResponse> {\r\n    const response = await this.api.post<QuestionGenerationResponse>('/api/generate', request);\r\n    return response.data;\r\n  }\r\n\r\n  // Question Bank Management\r\n  async getQuestionBanks(): Promise<QuestionBank[]> {\r\n    const response = await this.api.get<QuestionBank[]>('/api/questions');\r\n    return response.data;\r\n  }\r\n\r\n  async getQuestionBank(bankId: string): Promise<QuestionBank> {\r\n    const response = await this.api.get<QuestionBank>(`/api/questions/${bankId}`);\r\n    return response.data;\r\n  }\r\n\r\n  async createQuestionBank(bank: Omit<QuestionBank, 'id' | 'created_at' | 'updated_at'>): Promise<QuestionBank> {\r\n    const response = await this.api.post<QuestionBank>('/api/questions', bank);\r\n    return response.data;\r\n  }\r\n\r\n  async updateQuestionBank(bankId: string, bank: Partial<QuestionBank>): Promise<QuestionBank> {\r\n    const response = await this.api.put<QuestionBank>(`/api/questions/${bankId}`, bank);\r\n    return response.data;\r\n  }\r\n\r\n  async deleteQuestionBank(bankId: string): Promise<void> {\r\n    await this.api.delete(`/api/questions/${bankId}`);\r\n  }\r\n\r\n  // Export Functionality\r\n  async exportPaper(paper: QuestionPaper, format: 'pdf' | 'docx', includeAnswerKey: boolean = false): Promise<Blob> {\r\n    const response = await this.api.post('/api/export', {\r\n      questions: paper.questions,\r\n      format,\r\n      include_answer_key: includeAnswerKey,\r\n      paper_title: paper.title,\r\n      instructions: paper.instructions,\r\n    }, {\r\n      responseType: 'blob',\r\n    });\r\n\r\n    return response.data;\r\n  }\r\n\r\n  // Health Check\r\n  async healthCheck(): Promise<{ status: string; timestamp: string }> {\r\n    const response = await this.api.get('/health');\r\n    return response.data;\r\n  }\r\n\r\n  // Utility methods\r\n  getApiUrl(): string {\r\n    return API_BASE_URL;\r\n  }\r\n\r\n  setAuthToken(token: string): void {\r\n    localStorage.setItem('authToken', token);\r\n  }\r\n\r\n  removeAuthToken(): void {\r\n    localStorage.removeItem('authToken');\r\n  }\r\n\r\n  isAuthenticated(): boolean {\r\n    return !!localStorage.getItem('authToken');\r\n  }\r\n}\r\n\r\n// Create and export a singleton instance\r\nexport const apiService = new ApiService();\r\n\r\n// Export the class for testing purposes\r\nexport default ApiService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}